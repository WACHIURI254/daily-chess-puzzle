<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Daily Chess Puzzle - Offline Pieces</title>

<!-- jQuery needed for chessboard.js -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- chess.js for chess logic -->
<script src="https://cdn.jsdelivr.net/npm/chess.js@0.10.3/chess.min.js"></script>

<!-- chessboard.js CSS & JS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.js"></script>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f7fb;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 24px;
  }
  #board {
    max-width: 420px;
    width: 90vw;
    margin-bottom: 15px;
  }
  #info {
    max-width: 420px;
    width: 90vw;
    background: white;
    padding: 12px 20px;
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.06);
    text-align: center;
  }
  #info div {
    margin: 6px 0;
  }
  #nextPuzzle {
    margin-top: 10px;
    padding: 8px 14px;
    border: none;
    border-radius: 8px;
    background-color: #2563eb;
    color: white;
    font-weight: 600;
    cursor: pointer;
  }
  #nextPuzzle:hover {
    background-color: #1d4ed8;
  }
</style>
</head>
<body>
<h1>♟ Daily Chess Puzzle</h1>

<div id="board"></div>

<div id="info">
  <div><strong>Difficulty:</strong> <span id="difficulty">—</span></div>
  <div><strong>Time:</strong> <span id="timer">0s</span></div>
  <div id="status">Loading puzzle…</div>
  <button id="nextPuzzle">Next Puzzle</button>
</div>

<script>
// Embedded Base64 Wikipedia chess pieces
const base64Pieces = {
  "wP": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACh0lEQVRYhe3XwUuUYRzH8d/P/2UloJoSksJKQnEAlrEgEXpXktAopQKtHBwTlVjsOLKUFFtSUm0UpoZZGsiS6iUJdNqYpOkLKGsJLBZqKjJBTNzndgc4ef8/nZv9pMc9vff58v3zLfK2X69qLLG1d/99p9wIAc/u56OdkCEugB3oOWTOFZ6Go9wBcqGZ73U8DFIAb0u7RsPywIo+wt1Es8DXAPpAW8NwpXcv8GnzoQqDJsIl9uIOhZvwXhIDHgMX7JseM17mBP9kX/wTAfkfpxosyyXg0GqOVmqwE94DM6BWpK1jq7wvwAO+Ay/g9JtqDeA/x9XPYQ1yW/H2BQF8Nwc2cLsFM+yB0L0Pnc1ODztI6cGBEYVqCWcdU4qwQZcN4w4C5e4Df8q9AGcRqbCdzGlGLBj8DDwNQeXx8UIQoyqvwpvga9A9ANQdJOlo6EGfP7cD0DNdcxoN56wLP3QPODpZXrWMDXQ4dAO4B4p/pZ5As7ng8/XszWZcVb+2LhzH5e4CZy7PPGPiP7tfQY7nmFqrcU9uXAz18z/CGYwzUwMvAZfHXrJ+/v8Dvvl14Mtw0nD7cs6nLAaLdxrO8qC/XTq7N6GJ7W6kSvh7KnLMy4C1w3NA8yN3p8ZbMnAWCvQ6bz7vKAakqUvtRj3g5qjB/A9cBD3a4aWzk7k7BfgP3QWwNvaXMs80ceFfuAqcLPaZk3CcN6kdKa5hMYO/qBXBgOM6PY6oybC6i6syj1hhWi7U9ijLLo2G9Kc9+cS48svAR/Otx6OB1JAf6VbP/f6NV0Lfku0vKk0IfXFXOAj/HAXOc5eWhhxzOMxTPM+Fs1e55N+oF9RbnprDZk4QAAAABJRU5ErkJggg==",
  "wR": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABZUlEQVRYhe3WQQ6CQBAF4Av5XsA3bgZmISa+DAZbRliJSFvAog0UwSguDauAI/gyOTnE9pCN7xESf/vfp3AgBDx9F+n67DUoIRjpRR4EILM43nCRkkcAWZ5MMBUD2Do6EqizQxoNgC9yWwdqXo8QX9TsahqBp0uA3gjgFxHA5fMj0OV5v4p9AdJNgXTJOiAxaAjXEvYYp5aAOZ7CJ2BLwFaT3JgYFiAzjT4z86DeGUdw+wAxRsTiPqNYn8IQDya5E8iF4VOS5A4y3bZb0ABo1hvwIjVjztApzIBcB5DME5EeYog5Lw+AzGmF2L0w6pfxuLQMywTZ06zHgGskVLnSXXW3QfqBkpNgJWFiXUrA3gLkBRwHZLeOXhc43tjTAujEugDRgNqb3lxuP55BOaVk5bqRqo9N47LF+81MQ/fTNu38nyyvohNmcvoAGt57NJPdSm7MAAAAASUVORK5CYII=",
  "wN": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAArUlEQVRYhe3WMQ6CQBAF0FdgDdgB1EBtwgBa8AChbQR0JPwTnjwh0HjMZgBfjCR6IcXJ5/ZkIHB5XQ34A7FYa0INAG1CswAmSN+9CKIAvQFzOEE8qwB7BZwCq6RuQ2tJKNoCjwrjgS3gA3if2Oj5PRnQJn9Q5KYCPAs8C4twAnW7wDyN8ALC3rAxOEJ5yCMF0Q+OX8B+lN4sFexLcAOcmh0v4epGQifFKa56brrEW94b7N/ij6CB9nZxFZh/zi8+VqGIMYtT3hQy7qSAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wOC0xMFQxMzoyNTowMiswMzowMM7PpRUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDgtMTBUMTM6MjU6MDIrMDM6MDCWMwAtAAAAAElFTkSuQmCC",
  "wB": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAByElEQVRYhe3W0Q6CQBAF0Ep6Dk3YBOZBFzYCWd0UlqF4IauTnCPOCTmi7jODGTYEDzMnhzOzGJD93F0nZrQGSsAkxIh+4H1w68rZ6lhXA+0HKOdJpPAVTTXfgJ8HO8H7GQ5fS6PHL1xTg+ZqXMrIkArwEP6BvAZ6Au8BWqXreC/gGTgrl4g38VdxYHD+ltYRYOmB7wBc0r9Crj4Dy8BDI79SHJ2FXQBA6LB/lvMCKPtDH7vRAY9Z9OoDeyN+hgLHAm/mq6jwCFyA3gxONFh/vNgbwDRkA5R0H3lgds1bAYdAKf51wFsRXk4gTI8cCv+mCOJ0jAD7sMxUADyAqW2UyBby/kEQzA9eA5Phbwa0c4bFAbfNwNoQf2UozDw0+T0ebPPg84B6wRwLp4Qv4p+1FXAByCDKWr0WMezC6Xyp8fx7yWr/YiI2s3yXrIfbfnBfNYrk6U5FGm9AAAAAElFTkSuQmCC",
  "wQ": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABtUlEQVRYhe3WMQ7CQBAF0NcAkDdgC0oDN2ALNBBNIAoVbZAvYCv0A5r0A0n9HJDyX/GcM3vHCLGL7Z06bLHmTwGLYEAYI3A4bK5Uka8BVg7vqNAn5XQYRA6EB9OKDYaRAAW9qkmwz4sKcqYj9z2twCuUDoAB6RYj45aRZsSvj/hM8pAGejzAAHoIoWQFdsDLDNx6EYOlf7gD17AL3Cs0Uq8BmIGq+mAKoM3QHjDCC6H2wKw7AeYvWYPzB6W88F7Aw/T4wG2jDoBj+Fc5yPKtQqJXPz3BqX8jjMZ2zvgBoW6gZ5sG1vjSqQYZIGq/mSj8XQchpMF/jDXK6YDUE0+jxh9jT0jXBA8YbTnDkQeDT3+JH+O8sSC+aQkYvS2eRf4DvvyD5yCdHvEAAAAASUVORK5CYII=",
  "wK": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABoUlEQVRYhe3WQQ6DQBBA0YsF0A3WgKk2MY1+Ay+gqJyYNk1XJ4kYjIn94D/hkhW03kXx07aBDpTqZJ+JGOMp9HMWlUoQFMSQHk+zAkSbH0sIbOoL1Q5tkndXlSvP1rIhzFEmkN6A82g9VwAoXWBqXg4lhJPW6cFXz03AFLwMlZ1qJxx6x4JSr2AewG5L0DmDz8FWnkMx3c4c0ioCdF9Byz5D+jSSXoOw3PC94D6zQGpRsYDOleVjHyWwELdpK0jBlTozGABn6gFj+C7OLtiMTkMrh/kIX8S0Aqw8q4ZzFAUgddNnAqZxOjUQpIqv/4U8dzAAaIoS/hb45DTMvpP9ZC1DHLT1P8DLi9xyxWJ1yqAAAAAElFTkSuQmCC",
  "bP": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABF0lEQVRYhe3WMQqEUBRF0VfgpLYbVv4Hc6BaRbi5EIyGFBIL3MYD7CJHFtQX8PC/HLhGlPrKMX58N4t9P7RoYVlpj9CjY52FG+gD1jhQAcDw4qCuhAq3f1S7+6H9odMTCPwMr0BlLvqZC6c4TnqQvM6iwHLc4F+YA7vFkigxh9zn6wrQG0cEME2/FDEgiMu0rQEWkxWYoXHIlzBAQPYJ08WqJCUqv2SPyVD4NjHr+3uQ7Rhn/DZiqx+JgH4IgAAAABJRU5ErkJggg==",
  "bR": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABcUlEQVRYhe3WwUoDQRRA0c0nHqbgF6Ao8AfaDp+1QIFPILX6JyMAKI4E6OiB7b9g2MTuOx9cDghmSMRXwz/P5+7EoICwzOOzZjnJz7kFLqwaw+Kw+wCSk0gNjgOnMOAEmBaHlDPAEeAasCWO5wG9gIxIAVHc2AojsAJlAq3xH9RaLQojcw8p6ZBKjeADmh2HgPzN/BBoMo5TiAUGzYjXA36fQc5RsASvsEA+wu3L8IMEmMY6fYlA/Yv+Qwe7NKt9F7UXvZT5RxQAAAtv0zYAQyTPqF+C+Cs7s5eRl0QJxAAAAAAAAAElFTkSuQmCC",
  "bN": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABkUlEQVRYhe3WOw6CUBTF8c8Fx4h3IYjpYhBE2CPpAWlUJrkoFUqpJTckgJ2juEhL+jQ9jr7Gy6FQBhixR1xzQvk69txFq7q4RmaEQPRGfo7qwd79OBmAcHqScIMvG5XvAf8wwKXLzB/NFcezwdCJ+cASqE0TYk4FcKPiNOQDVABpQy5B1RvBUoyLQRokwnqBwX8KhVOhXTFEmAt4YErY0QO/DeOD1DVHkrR9jp+qTI6OQSX+OWlWfGYoMtGKYULqxVf4QMXMJwl1zEacguDnEaLqzDMmsfJEd+AzqRhGgN/QB6xD1ztKxkBLDTwAcRmoMURIGu+FPL4BqkuVBTIGclHc8A/A+dM5lwD3jgtb+EuP7/yO6Dq9scE5p92Fx2zCxQf7nJZzRs0z7Jv14WP05G08V2rV75MDsWehcO/QC8HfQBUc9LSl3EoXPA7+xnIG9XoHbQFcQzO+u0yLJkJ8LgAAAABJRU5ErkJggg==",
  "bB": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABgElEQVRYhe3W0Q2DQBAF0B+qPpARmgtZUGnKCRlt/RYEySmEyORFh5FxT9iq/6DvY0OZ7BMYq6S6CJYIgEvmDH9PtpMAk49fAxmyTAF27FQzBXhUCC1gOwJWBNOj6ggz9Rr8BPRq2hAcdANRwcoqC+Bh2SnGgQ1K0IBWYNsjxUPovTNBck14ewHwqBx+gsw/Ap0kVdhZ7mUYKwB7wXXnP64FwQfDuC7qPcAbGk5QdYAVgg+YLPb3gFsgm6BkxGVIA45MsYTvj9FucAn1V6B67TEHtH7D8HKbDOVg10YzqBCXn7IFH7ACZ8XfHRfOKuPVgxox+38dxiVhmIcAAHIHwhMn+IM2loPwqPKj1Ea4OuPlUHgDgPMA+9L7Q7hF0fE5XTqPPX45IAXqIpuMvYDfJvQhYcPqxOEAAAAASUVORK5CYII=",
  "bQ": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABgklEQVRYhe3WwQ3DIBCF4e+RLABlygHtyBs5JH5LnATfZ3AQTQSSsj2lgEoAwSOi8i88pFJ6ZrGOw+L2doAWH0+8M5YAXkIGR0Iv/MTEshzAZC7iAWdAHn4CHC3AZky+HA/0MZ3yR79CxRNPV5WZl6qWn0HTNwBx/5m6EZF8yqQ9DmAeRQGZTXPEdPZ75kTrAr8DwNHsG0e1ERAFLo7qQGDCf7CtDckk9QEQXqgHdxVCoAMCiW36V8DSJTsDQ4R2C7PqBOBl3jPEj8vwMlsTCWdxUGsAvOBB1nOfTyzSG5IF8C2hOO8PwnzALeHs2z/BCPhmBTwDbtC5lxP8JPII5PvlfylJgJp3g9jZkOMZ++vW13iFOjA3+v8C3dEg3xLrAlXD08s4SzP92RDquG34mvgDzHsQHOwT99qAAAAAElFTkSuQmCC",
  "bK": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABoUlEQVRYhe3WQQ6DQBBA0YsF0A3WgKk2MY1+Ay+gqJyYNk1XJ4kYjIn94D/hkhW03kXx07aBDpTqZJ+JGOMp9HMWlUoQFMSQHk+zAkSbH0sIbOoL1Q5tkndXlSvP1rIhzFEmkN6A82g9VwAoXWBqXg4lhJPW6cFXz03AFLwMlZ1qJxx6x4JSr2AewG5L0DmDz8FWnkMx3c4c0ioCdF9Byz5D+jSSXoOw3PC94D6zQGpRsYDOleVjHyWwELdpK0jBlTozGABn6gFj+C7OLtiMTkMrh/kIX8S0Aqw8q4ZzFAUgddNnAqZxOjUQpIqv/4U8dzAAaIoS/hb45DTMvpP9ZC1DHLT1P8DLi9xyxWJ1yqAAAAAElFTkSuQmCC"
};

let board = null;
let game = new Chess();

const statusEl = document.getElementById("status");
const difficultyEl = document.getElementById("difficulty");
const timerEl = document.getElementById("timer");
const nextPuzzleBtn = document.getElementById("nextPuzzle");

let timerInterval = null;
let secondsElapsed = 0;

function updateTimer() {
  secondsElapsed++;
  timerEl.textContent = secondsElapsed + "s";
}

function resetTimer() {
  clearInterval(timerInterval);
  secondsElapsed = 0;
  timerEl.textContent = "0s";
  timerInterval = setInterval(updateTimer, 1000);
}

// Function to load puzzle from Cloudflare Worker endpoint (update URL if needed)
async function loadPuzzle() {
  try {
    resetTimer();
    statusEl.textContent = "Loading puzzle…";
    difficultyEl.textContent = "—";

    // Replace this URL with your own puzzle API endpoint
    const response = await fetch("https://daily-chess-puzzle.kogzy.workers.dev");

    if (!response.ok) throw new Error("Network response was not ok");

    const puzzle = await response.json();

    difficultyEl.textContent = puzzle.difficulty || "Unknown";
    game = new Chess(puzzle.fen);
    board.position(puzzle.fen);
    statusEl.textContent = "Puzzle loaded. Moves to solve: " + puzzle.moves.length;

    resetTimer();

    // Setup puzzle move playback (optional)
    // For demo, just do nothing; you can add move validation/playback later

  } catch (e) {
    statusEl.textContent = "Error loading puzzle: " + e.message;
  }
}

$(function () {
  board = Chessboard("board", {
    draggable: false,
    position: "start",
    pieceTheme: function (piece) {
      return base64Pieces[piece];
    },
  });

  loadPuzzle();

  nextPuzzleBtn.onclick = loadPuzzle;
});
</script>
</body>
</html>
